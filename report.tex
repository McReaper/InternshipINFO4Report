\documentclass[french,a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\title{Rapport}
\author{Victor Malod}
\date{Août 2021}

\usepackage{natbib}                 % Pour la bibliographie
\usepackage{graphicx}               % Pour les insertions d'images
\usepackage{setspace}               % Pour l'interligne
\usepackage{geometry}               % Pour la marge dans le document
\usepackage{fancyhdr}               % Pour l'en-tête et pied de page (plus d'info ici : https://www.overleaf.com/learn/latex/Headers_and_footers)
\usepackage{nameref}                % Pour reférencer le nom de la section (voir ci dessous)
\usepackage[french]{babel}          % Pour la langue
\usepackage{hyperref}               % Pour les liens clicables
\usepackage{microtype}              % Pour la justification du texte
\usepackage{tabularx}               % Pour des tableaux plus flexible
\usepackage[threshold=1]{csquotes}  % Pour les blocs de citations
\makeatletter
\newcommand*{\currentname}{\@currentlabelname}
\makeatother

\usepackage{xcolor}
\usepackage{listings}
\lstset{frame=lines,
  escapeinside={(*}{*)},
  numbers=left,
  basicstyle={\footnotesize\ttfamily},
  keywordstyle={\color{purple}},
}
\lstdefinelanguage{Phaistos}{
  morekeywords=[1]{list, int, void, bool, bool, request, req},
  morekeywords=[2]{const, order, if, else, while, do, until, On, return},
  morekeywords=[3]{POLICY, HELPERS, EVENTS,INIT, HAS_WORK,DISPATCH, READ, WRITE, HZ, INSERT, REMOVE, EXIT, MERGE},
  morekeywords=[4]{init,is_empty,is_empty_careful,append,remove,move_to,next_request},
  keywordstyle=[1]{\color{green}},
  keywordstyle=[2]{\color{blue}},
  keywordstyle=[3]{\color{purple}},
  keywordstyle=[4]{\color{orange}},
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle={\color{blue!60!black}\itshape},
  numbersep=1em,xleftmargin=2em,
  sensitive=true
}
\lstdefinelanguage{Phaistos-Template}{
  alsoletter = {!},
  morekeywords=[1]{list, int, void, bool, string, request, req, option},
  morekeywords=[2]{const, order, if, then, else, while, do, until, On, return},
  morekeywords=[3]{match, with, None, Some, ignore, self, my,
    String, let, List, string_of_int,map,in},
  morekeywords=[4]{use,forEach_at,forEach,pushNamedScope,callEach,typeAssert,popScope},
  morekeywords=[5]{let!},
  keywordstyle=[1]{\color{green}},
  keywordstyle=[2]{\color{blue}},
  keywordstyle=[3]{\color{purple}},
  keywordstyle=[4]{\color{orange}},
  keywordstyle=[5]{\color{magenta}},
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle={\color{blue!60!black}\itshape},
  numbersep=1em,xleftmargin=2em,
  sensitive=true,
  literate= 
  *{[\$}{{{\bf\color{cyan}[\$}}}2
  {\$]}{{{\bf\color{cyan}\$]}}}2
  {["}{{{\bf\color{cyan}["}}}2
  {"]}{{{\bf\color{cyan}"]}}}2
  {[\{}{{{\bf\color{cyan}[\{}}}2
  {\}]}{{{\bf\color{cyan}\}]}}}2
}
\lstdefinelanguage{Phaistos-AST}{
  morekeywords=[1]{list,string,option},
  morekeywords=[2]{topLevel, globalDefinition, policyDeclaration, event, script, varDecl, expression, eventDeclaration, visitor},
  morekeywords=[3]{val, object, method, mutable, as},
  keywordstyle=[1]{\color{green}},
  keywordstyle=[2]{\color{blue}},
  keywordstyle=[3]{\color{purple}},
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle={\color{blue!60!black}\itshape},
  numbersep=1em,xleftmargin=2em,
  sensitive=true
}
\lstdefinelanguage{Makefile}{
  morekeywords=[1]{MAKE, CURDIR},
  morekeywords=[2]{-s, -C},
  keywordstyle=[1]{\color{green}},
  keywordstyle=[2]{\color{blue}},
  comment=[l]{\#},
  commentstyle={\color{blue!60!black}\itshape},
  sensitive=true,
  numbersep=1em,xleftmargin=2em,
  literate= *{\$}{{{\color{orange}\$}}}1
}
\lstdefinelanguage{Dune}{
  morekeywords=[1]{executable, preprocess, name, libraries},
  morekeywords=[2]{flags, action, run},
  keywordstyle=[1]{\color{green}},
  keywordstyle=[2]{\color{blue}},
  sensitive=true,
  numbersep=1em,xleftmargin=2em,
  literate= *{\%}{{{\color{orange}\%}}}1
}
\lstdefinestyle{customShell}{
  language=sh,
  showspaces=false,
  showstringspaces=false,
  basicstyle=\tiny\ttfamily,
  comment=[l]{\#},
  commentstyle={\color{blue!60!black}\itshape},
}

% Pour toutes caractéristiques du texte dans le rapport
\singlespacing
\geometry{
    a4paper,
    lmargin=25mm, % marge gauche à 2.5cm
    rmargin=30mm,
    tmargin=30mm,
    bmargin=30mm,
    headheight=30mm
}
\pagestyle{fancy}
\fancyhf{} % Enlève les anciennes en-têtes et pieds de pages
\rhead{Rapport de stage 2021}
\lhead{Victor M.}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0pt}
% Pour la commande \subsubsubsection{}
\newcommand{\subsubsubsection}[1]{\paragraph{#1}\mbox{}\vspace{4mm}}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

%%%%%%%%%%%%%%%%%%%%%%%
%% DEBUT DE DOCUMENT %%
%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\input{misc/front_cover}
\tableofcontents
\vspace{2cm}
\input{misc/abstract}
\input{sections/intro}
\input{sections/phaistos}
\input{sections/context}
\input{sections/contrib}
\input{sections/hindsight}

\bibliographystyle{plain}
\bibliography{misc/references}

\input{misc/appendix}

\input{misc/back_cover}

\end{document}
